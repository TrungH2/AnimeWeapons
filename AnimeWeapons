-- TÃŠN: HIMONO HUB v4.2 - SULFUR EDITION (MODERN UI)
-- NGÃ€Y: 2025-11-21
-- TÃ¡c giáº£: Gemini (AI)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")
local LocalPlayer = Players.LocalPlayer

-- CÃC BIáº¾N TRáº NG THÃI TOÃ€N Cá»¤C
local stealthMode = true
local safeConnections = {}
local activeLoops = {}
local selectedEnemyPositions = {} Â  -- LÆ°u trá»¯ Vá»‹ trÃ­ cá»§a cÃ¡c káº» Ä‘á»‹ch Ä‘Ã£ chá»n
local uniqueEnemyNames = {} Â  Â  Â  Â  -- TÃªn cÃ¡c káº» Ä‘á»‹ch duy nháº¥t hiá»‡n cÃ³ trong táº§m
local selectedEnemyName = nil Â  Â  Â  -- TÃªn káº» Ä‘á»‹ch Ä‘Æ°á»£c chá»n tá»« ComboBox
local selectedGachaType = "Biju"
local selectedZone = "Zone 1"
local selectedStat = "Attack"
local autoOpenEggEnabled = false

local isDungeonActive = false Â  Â  Â  Â  -- Cá»: Báº¬T khi Auto Join/Farm Dungeon ON
local autoDungeonFarmEnabled = false Â -- Cá»: Báº¬T khi Auto Farm Dungeon ON
local isPlayerInDungeon = false Â  Â  Â  -- Cá»: Theo dÃµi tráº¡ng thÃ¡i player trong Dungeon

-- CÃ¡c biáº¿n lÆ°u tráº¡ng thÃ¡i Farm trÆ°á»›c khi vÃ o Dungeon
local wasAutoAttackEnabled = false
local wasFarmSelectedEnabled = false
local wasFarmRandomEnabled = false
local wasAutoCollectEnabled = false

-- BIáº¾N Má»šI Äá»‚ QUAY Láº I Vá»Š TRÃ CÅ¨
local lastZone = "Zone 1" 

-- -------------------------------------------------------------------
-- CHá»¨C NÄ‚NG CÆ  Báº¢N (Safe Fire, Wait, Loop, Connect)
-- -------------------------------------------------------------------

local function SafeFire(remote, ...)
Â  Â  if stealthMode then RunService.Heartbeat:Wait() end
Â  Â  remote:FireServer(...)
end

local function SafeWait()
Â  Â  if not stealthMode then task.wait(); return end
Â  Â  math.randomseed(tick())
Â  Â  local delay = math.random(20, 50) / 100
Â  Â  local start = tick()
Â  Â  while tick() - start < delay do RunService.Heartbeat:Wait() end
end

local function SafeCall(func, ...)
Â  Â  local success, result = pcall(func, ...)
Â  Â  return success and result or nil
end

local function SafeConnect(signal, callback)
Â  Â  local conn = signal:Connect(function(...)
Â  Â  Â  Â  if stealthMode then SafeWait() end
Â  Â  Â  Â  SafeCall(callback, ...)
Â  Â  end)
Â  Â  table.insert(safeConnections, conn)
Â  Â  return conn
end

local function StartLoop(name, func, interval)
Â  Â  if activeLoops[name] then activeLoops[name] = false; task.wait(0.1) end
Â  Â  activeLoops[name] = true
Â  Â  task.spawn(function()
Â  Â  Â  Â  while activeLoops[name] do
Â  Â  Â  Â  Â  Â  pcall(func)
Â  Â  Â  Â  Â  Â  if interval then task.wait(interval) else RunService.Heartbeat:Wait() end
Â  Â  Â  Â  end
Â  Â  end)
end

local function StopLoop(name)
Â  Â  if activeLoops[name] then activeLoops[name] = false end
end

-- -------------------------------------------------------------------
-- CHá»¨C NÄ‚NG QUáº¢N LÃ FARM LOOPS
-- -------------------------------------------------------------------

local function SaveAndStopFarmLoops()
Â  Â  -- LÆ°u tráº¡ng thÃ¡i cÃ¡c loop farm map
Â  Â  wasAutoAttackEnabled = activeLoops["AutoAttack"] or false
Â  Â  wasFarmSelectedEnabled = activeLoops["FarmSelected"] or false
Â  Â  wasFarmRandomEnabled = activeLoops["FarmRandom"] or false
Â  Â  wasAutoCollectEnabled = activeLoops["AutoCollect"] or false
Â  Â  
Â  Â  -- Dá»«ng cÃ¡c loop farm map
Â  Â  StopLoop("AutoAttack")
Â  Â  StopLoop("FarmSelected")
Â  Â  StopLoop("FarmRandom")
Â  Â  StopLoop("AutoCollect")
end

local function RestoreFarmLoops()
Â  Â  if wasAutoAttackEnabled then StartLoop("AutoAttack", AutoAttackLogic, 0.3) end
Â  Â  if wasFarmSelectedEnabled then StartLoop("FarmSelected", FarmSelectedLogic, 0.5) end
Â  Â  if wasFarmRandomEnabled then StartLoop("FarmRandom", FarmRandomLogic, 0.5) end
Â  Â  if wasAutoCollectEnabled then StartLoop("AutoCollect", AutoCollectLogic, 1.0) end
Â  Â  
Â  Â  print("âœ… ÄÃ£ khÃ´i phá»¥c cÃ i Ä‘áº·t Farm map cÅ©.")
Â  Â  -- Reset cá» lÆ°u tráº¡ng thÃ¡i
Â  Â  wasAutoAttackEnabled = false
Â  Â  wasFarmSelectedEnabled = false
Â  Â  wasFarmRandomEnabled = false
Â  Â  wasAutoCollectEnabled = false
end

-- -------------------------------------------------------------------
-- LOGIC FARM & CÆ  CHáº¾ PHÃT HIá»†N Káºº Äá»ŠCH
-- -------------------------------------------------------------------

local antiAFKConnection
local function EnableAntiAFK()
Â  Â  if antiAFKConnection then antiAFKConnection:Disconnect() end
Â  Â  antiAFKConnection = LocalPlayer.Idled:Connect(function()
Â  Â  Â  Â  SafeCall(function()
Â  Â  Â  Â  Â  Â  VirtualUser:CaptureController()
Â  Â  Â  Â  Â  Â  VirtualUser:ClickButton2(Vector2.new())
Â  Â  Â  Â  end)
Â  Â  end)
end

local function FindEnemiesInRange(range, nameFilter)
Â  Â  local character = LocalPlayer.Character
Â  Â  if not character or not character:FindFirstChild("HumanoidRootPart") then return {} end
Â  Â  local enemies = {}
Â  Â  local playerPos = character.HumanoidRootPart.Position
Â  Â  for _, obj in pairs(workspace:GetDescendants()) do
Â  Â  Â  Â  if obj:IsA("Model") and obj:FindFirstChild("Humanoid") and obj:FindFirstChild("Head") and obj.Humanoid.Health > 0 then
Â  Â  Â  Â  Â  Â  local isPlayer = obj:IsDescendantOf(Players)
Â  Â  Â  Â  Â  Â  if not isPlayer and (not nameFilter or obj.Name == nameFilter) then
Â  Â  Â  Â  Â  Â  Â  Â  local distance = (playerPos - obj.Head.Position).Magnitude
Â  Â  Â  Â  Â  Â  Â  Â  if distance <= (range or 100) then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  table.insert(enemies, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Model = obj,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Name = obj.Name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Position = obj.Head.Position,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Distance = distance,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Health = obj.Humanoid.Health,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  MaxHealth = obj.Humanoid.MaxHealth
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end
Â  Â  table.sort(enemies, function(a, b) return a.Distance < b.Distance end)
Â  Â  return enemies
end

-- Cáº­p nháº­t danh sÃ¡ch káº» Ä‘á»‹ch DUY NHáº¤T vÃ  cÃ¡c vá»‹ trÃ­ cho káº» Ä‘á»‹ch Ä‘Ã£ chá»n
local function RefreshEnemiesData()
Â  Â  local enemies = FindEnemiesInRange(100)
Â  Â  local uniqueNames = {}
Â  Â  local positionsByName = {}
Â  Â  
Â  Â  for _, enemy in ipairs(enemies) do
Â  Â  Â  Â  if not uniqueNames[enemy.Name] then
Â  Â  Â  Â  Â  Â  uniqueNames[enemy.Name] = true
Â  Â  Â  Â  end
Â  Â  Â  Â  
Â  Â  Â  Â  if not positionsByName[enemy.Name] then
Â  Â  Â  Â  Â  Â  positionsByName[enemy.Name] = {}
Â  Â  Â  Â  end
Â  Â  Â  Â  table.insert(positionsByName[enemy.Name], enemy.Position)
Â  Â  end
Â  Â  
Â  Â  uniqueEnemyNames = {}
Â  Â  for name in pairs(uniqueNames) do table.insert(uniqueEnemyNames, name) end
Â  Â  table.sort(uniqueEnemyNames)
Â  Â  
Â  Â  return positionsByName
end

local function AutoAttackLogic()
Â  Â  if isDungeonActive then return end Â -- Dá»ªNG khi Auto Dungeon ON
Â  Â  local enemies = FindEnemiesInRange(50)
Â  Â  if #enemies > 0 then
Â  Â  Â  Â  local nearestEnemy = enemies[1]
Â  Â  Â  Â  local character = LocalPlayer.Character
Â  Â  Â  Â  if character and character:FindFirstChild("HumanoidRootPart") then
Â  Â  Â  Â  Â  Â  character.HumanoidRootPart.CFrame = CFrame.new(nearestEnemy.Position + Vector3.new(0,2,0))
Â  Â  Â  Â  Â  Â  local remote = ReplicatedStorage:FindFirstChild("RemoteEvent") or ReplicatedStorage:FindFirstChild("Remote")
Â  Â  Â  Â  Â  Â  if remote then SafeFire(remote, "Attack", nearestEnemy.Model) end
Â  Â  Â  Â  end
Â  Â  end
end

local function FarmSelectedLogic()
Â  Â  if isDungeonActive then return end Â -- Dá»ªNG khi Auto Dungeon ON
Â  Â  if not selectedEnemyName then return end
Â  Â  
Â  Â  -- Chá»‰ tÃ¬m káº» Ä‘á»‹ch cÃ³ tÃªn Ä‘Ã£ chá»n
Â  Â  local selectedEnemies = FindEnemiesInRange(200, selectedEnemyName) 
Â  Â  if #selectedEnemies == 0 then return end
Â  Â  
Â  Â  local character = LocalPlayer.Character
Â  Â  if not character or not character:FindFirstChild("HumanoidRootPart") then return end
Â  Â  
Â  Â  local nearestEnemy = selectedEnemies[1] Â -- Láº¥y káº» Ä‘á»‹ch gáº§n nháº¥t trong sá»‘ nhá»¯ng káº» Ä‘Ã£ chá»n
Â  Â  
Â  Â  -- Teleport Ä‘áº¿n vá»‹ trÃ­ káº» Ä‘á»‹ch
Â  Â  character.HumanoidRootPart.CFrame = CFrame.new(nearestEnemy.Position + Vector3.new(0,2,0))
Â  Â  
Â  Â  -- Táº¥n cÃ´ng
Â  Â  local remote = ReplicatedStorage:FindFirstChild("RemoteEvent") or ReplicatedStorage:FindFirstChild("Remote")
Â  Â  if remote then SafeFire(remote, "Attack", nearestEnemy.Model) end
end

local function FarmRandomLogic()
Â  Â  if isDungeonActive then return end Â -- Dá»ªNG khi Auto Dungeon ON
Â  Â  local enemies = FindEnemiesInRange(50)
Â  Â  if #enemies > 0 then
Â  Â  Â  Â  local randomEnemy = enemies[math.random(1, #enemies)]
Â  Â  Â  Â  local character = LocalPlayer.Character
Â  Â  Â  Â  if character and character:FindFirstChild("HumanoidRootPart") then
Â  Â  Â  Â  Â  Â  character.HumanoidRootPart.CFrame = CFrame.new(randomEnemy.Position + Vector3.new(0,2,0))
Â  Â  Â  Â  Â  Â  local remote = ReplicatedStorage:FindFirstChild("RemoteEvent") or ReplicatedStorage:FindFirstChild("Remote")
Â  Â  Â  Â  Â  Â  if remote then SafeFire(remote, "Attack", randomEnemy.Model) end
Â  Â  Â  Â  end
Â  Â  end
end

local function AutoCollectLogic()
Â  Â  -- HOáº T Äá»˜NG Cáº¢ TRONG VÃ€ NGOÃ€I DUNGEON
Â  Â  local character = LocalPlayer.Character
Â  Â  if not character then return end
Â  Â  for _, obj in pairs(workspace:GetDescendants()) do
Â  Â  Â  Â  if obj:IsA("Part") and (obj.Name:lower():find("drop") or obj.Name:lower():find("coin") or obj.Name:lower():find("reward")) then
Â  Â  Â  Â  Â  Â  local distance = (character.HumanoidRootPart.Position - obj.Position).Magnitude
Â  Â  Â  Â  Â  Â  if distance < 20 then
Â  Â  Â  Â  Â  Â  Â  Â  local remote = ReplicatedStorage:FindFirstChild("RemoteEvent") or ReplicatedStorage:FindFirstChild("Remote")
Â  Â  Â  Â  Â  Â  Â  Â  if remote then SafeFire(remote, "Collect", obj) end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end
end

local function AutoRebirthLogic()
Â  Â  local remote = ReplicatedStorage:FindFirstChild("Reply") and ReplicatedStorage.Reply:FindFirstChild("Reliable")
Â  Â  if remote then
Â  Â  Â  Â  SafeFire(remote, "RankUp") 
Â  Â  Â  Â  print("âš¡ ÄÃ£ kÃ­ch hoáº¡t Auto Rebirth/RankUp!")
Â  Â  end
end

local function AutoJoinDungeonEasyLogic()
Â  Â  -- Ghi nhá»› zone hiá»‡n táº¡i (dÃ¹ng selectedZone) trÆ°á»›c khi join dungeon
Â  Â  lastZone = selectedZone 
Â  Â  
Â  Â  local remote = ReplicatedStorage:FindFirstChild("Reply") and ReplicatedStorage.Reply:FindFirstChild("Reliable")
Â  Â  if remote then
Â  Â  Â  Â  SafeFire(remote, "Join Gamemode", {[1] = "Dungeon:1"}) -- "Dungeon:1" lÃ  Dungeon Easy
Â  Â  Â  Â  print("ğŸ—ºï¸ ÄÃ£ gá»­i yÃªu cáº§u tham gia Dungeon Easy!")
Â  Â  end
end

local function AutoFarmDungeonLogic()
Â  Â  -- CHá»ˆ THá»°C HIá»†N KHI á» TRONG DUNGEON (dá»±a trÃªn viá»‡c tÃ¬m tháº¥y káº» Ä‘á»‹ch)
Â  Â  local enemies = FindEnemiesInRange(200)
Â  Â  local character = LocalPlayer.Character
Â  Â  
Â  Â  if #enemies > 0 and character and character:FindFirstChild("HumanoidRootPart") then
Â  Â  Â  Â  isPlayerInDungeon = true 
Â  Â  Â  Â  local nearestEnemy = enemies[1]
Â  Â  Â  Â  
Â  Â  Â  Â  -- Teleport Ä‘áº¿n vá»‹ trÃ­ káº» Ä‘á»‹ch
Â  Â  Â  Â  character.HumanoidRootPart.CFrame = CFrame.new(nearestEnemy.Position + Vector3.new(0,5,0))
Â  Â  Â  Â  
Â  Â  Â  Â  -- Táº¥n cÃ´ng
Â  Â  Â  Â  local remote = ReplicatedStorage:FindFirstChild("RemoteEvent") or ReplicatedStorage:FindFirstChild("Remote")
Â  Â  Â  Â  if remote then SafeFire(remote, "Attack", nearestEnemy.Model) end
Â  Â  else
Â  Â  Â  Â  isPlayerInDungeon = false
Â  Â  Â  Â  -- Náº¿u Auto Join ON, nÃ³ sáº½ thá»­ Join láº¡i.
Â  Â  Â  Â  -- Náº¿u Auto Join OFF, logic DungeonExitCheck sáº½ xá»­ lÃ½ viá»‡c thoÃ¡t.
Â  Â  end
end

local function DungeonExitCheck()
Â  Â  -- Kiá»ƒm tra náº¿u Dungeon Ä‘Ã£ Ä‘Æ°á»£c kÃ­ch hoáº¡t (isDungeonActive = true), 
Â  Â  -- nhÆ°ng hiá»‡n táº¡i khÃ´ng tÃ¬m tháº¥y káº» Ä‘á»‹ch Dungeon (isPlayerInDungeon = false sau 1-2 láº§n check)
Â  Â  -- vÃ  cáº£ hai Toggle Dungeon (Join vÃ  Farm) Ä‘á»u OFF.
Â  Â  if isDungeonActive and not isPlayerInDungeon and not activeLoops["AutoJoinDungeon"] and not activeLoops["AutoFarmDungeon"] then
Â  Â  Â  Â  
Â  Â  Â  Â  StopLoop("DungeonExitLoop")
Â  Â  Â  Â  
Â  Â  Â  Â  isDungeonActive = false
Â  Â  Â  Â  autoDungeonFarmEnabled = false
Â  Â  Â  Â  
Â  Â  Â  Â  print("ğŸšª ÄÃ£ thoÃ¡t Dungeon. Quay vá» Zone cÅ©: " .. lastZone)
Â  Â  Â  Â  local remote = ReplicatedStorage:FindFirstChild("Reply") and ReplicatedStorage.Reply:FindFirstChild("Reliable")
Â  Â  Â  Â  if remote then SafeFire(remote, "Zone Teleport", {[1]=lastZone}) end -- Teleport vá» Zone Ä‘Ã£ lÆ°u
Â  Â  Â  Â  selectedZone = lastZone -- Cáº­p nháº­t UI
Â  Â  Â  Â  
Â  Â  Â  Â  RestoreFarmLoops() -- KhÃ´i phá»¥c láº¡i cÃ¡c loop farm map
Â  Â  Â  Â  
Â  Â  Â  Â  StartLoop("DungeonExitLoop", DungeonExitCheck, 5)
Â  Â  end
end
-- Báº¯t Ä‘áº§u loop kiá»ƒm tra thoÃ¡t Dungeon
StartLoop("DungeonExitLoop", DungeonExitCheck, 5)

-- -------------------------------------------------------------------
-- GUI FRAMEWORK CHá»¨C NÄ‚NG
-- -------------------------------------------------------------------

-- Táº O KHUNG TOÃ€N Bá»˜ (DÃ¹ng Ä‘á»ƒ kÃ©o)
local MainContainer
-- Táº O NÃšT áº¨N/HIá»†N
local ToggleButton 

-- HÃ€M Táº¡o Toggle Switch
function CreateToggleSwitch(text, description, default, callback)
Â  Â  local frame = Instance.new("Frame")
Â  Â  frame.Size = UDim2.new(1, 0, 0, 55)
Â  Â  frame.BackgroundTransparency = 1
Â  Â  
Â  Â  local title = Instance.new("TextLabel")
Â  Â  title.Size = UDim2.new(0.65, 0, 0, 20)
Â  Â  title.Position = UDim2.new(0, 10, 0, 5)
Â  Â  title.BackgroundTransparency = 1
Â  Â  title.Text = text
Â  Â  title.TextColor3 = Color3.fromRGB(40, 40, 20)
Â  Â  title.TextXAlignment = Enum.TextXAlignment.Left
Â  Â  title.Font = Enum.Font.GothamBold
Â  Â  title.TextSize = 13
Â  Â  title.Parent = frame

Â  Â  local desc = Instance.new("TextLabel")
Â  Â  desc.Size = UDim2.new(0.65, 0, 0, 15)
Â  Â  desc.Position = UDim2.new(0, 10, 0, 25)
Â  Â  desc.BackgroundTransparency = 1
Â  Â  desc.Text = description
Â  Â  desc.TextColor3 = Color3.fromRGB(120, 120, 60)
Â  Â  desc.TextXAlignment = Enum.TextXAlignment.Left
Â  Â  desc.Font = Enum.Font.Gotham
Â  Â  desc.TextSize = 10
Â  Â  desc.Parent = frame

Â  Â  local toggleButton = Instance.new("TextButton")
Â  Â  toggleButton.Size = UDim2.new(0, 65, 0, 30)
Â  Â  toggleButton.Position = UDim2.new(1, -75, 0.5, -15)
Â  Â  toggleButton.Text = default and "ON" or "OFF"
Â  Â  toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
Â  Â  toggleButton.BackgroundColor3 = default and Color3.fromRGB(40, 180, 40) or Color3.fromRGB(180, 40, 40)
Â  Â  toggleButton.Font = Enum.Font.GothamBold
Â  Â  toggleButton.TextSize = 14
Â  Â  toggleButton.BorderSizePixel = 0
Â  Â  toggleButton.Parent = frame

Â  Â  local corner = Instance.new("UICorner")
Â  Â  corner.CornerRadius = UDim.new(0, 8)
Â  Â  corner.Parent = toggleButton

Â  Â  local isOn = default

Â  Â  SafeConnect(toggleButton.MouseButton1Click, function()
Â  Â  Â  Â  isOn = not isOn
Â  Â  Â  Â  toggleButton.Text = isOn and "ON" or "OFF"
Â  Â  Â  Â  toggleButton.BackgroundColor3 = isOn and Color3.fromRGB(40, 180, 40) or Color3.fromRGB(180, 40, 40)
Â  Â  Â  Â  callback(isOn)
Â  Â  end)

Â  Â  return frame, toggleButton
end

-- HÃ€M Táº¡o Action Button (NÃºt Ä‘Æ¡n)
function CreateActionButton(text, description, callback)
Â  Â  local frame = Instance.new("Frame")
Â  Â  frame.Size = UDim2.new(1, 0, 0, 55)
Â  Â  frame.BackgroundTransparency = 1

Â  Â  local btn = Instance.new("TextButton")
Â  Â  btn.Size = UDim2.new(0.4, 0, 0, 32)
Â  Â  btn.Position = UDim2.new(0, 10, 0, 12)
Â  Â  btn.BackgroundColor3 = Color3.fromRGB(40, 180, 40)
Â  Â  btn.Text = text
Â  Â  btn.TextColor3 = Color3.fromRGB(255, 255, 255)
Â  Â  btn.Font = Enum.Font.GothamBold
Â  Â  btn.TextSize = 13
Â  Â  btn.BorderSizePixel = 0
Â  Â  btn.Parent = frame

Â  Â  local btnCorner = Instance.new("UICorner")
Â  Â  btnCorner.CornerRadius = UDim.new(0, 8)
Â  Â  btnCorner.Parent = btn

Â  Â  local desc = Instance.new("TextLabel")
Â  Â  desc.Size = UDim2.new(0.55, 0, 0, 20)
Â  Â  desc.Position = UDim2.new(0.4, 20, 0, 18)
Â  Â  desc.BackgroundTransparency = 1
Â  Â  desc.Text = description
Â  Â  desc.TextColor3 = Color3.fromRGB(120, 120, 60)
Â  Â  desc.Font = Enum.Font.Gotham
Â  Â  desc.TextSize = 10
Â  Â  desc.TextXAlignment = Enum.TextXAlignment.Left
Â  Â  desc.Parent = frame

Â  Â  SafeConnect(btn.MouseButton1Click, function()
Â  Â  Â  Â  if callback then callback() end
Â  Â  end)

Â  Â  return frame
end

-- HÃ€M Táº¡o ComboBox (Modern)
function CreateComboBox(text, description, items, callback)
Â  Â  local frame = Instance.new("Frame")
Â  Â  frame.Size = UDim2.new(1, 0, 0, 65)
Â  Â  frame.BackgroundTransparency = 1

Â  Â  local title = Instance.new("TextLabel")
Â  Â  title.Size = UDim2.new(0.5, 0, 0, 20)
Â  Â  title.Position = UDim2.new(0, 10, 0, 5)
Â  Â  title.BackgroundTransparency = 1
Â  Â  title.Text = text
Â  Â  title.TextColor3 = Color3.fromRGB(40, 40, 20)
Â  Â  title.Font = Enum.Font.GothamBold
Â  Â  title.TextSize = 13
Â  Â  title.TextXAlignment = Enum.TextXAlignment.Left
Â  Â  title.Parent = frame

Â  Â  local desc = Instance.new("TextLabel")
Â  Â  desc.Size = UDim2.new(0.5, 0, 0, 15)
Â  Â  desc.Position = UDim2.new(0, 10, 0, 25)
Â  Â  desc.BackgroundTransparency = 1
Â  Â  desc.Text = description
Â  Â  desc.TextColor3 = Color3.fromRGB(120, 120, 60)
Â  Â  desc.Font = Enum.Font.Gotham
Â  Â  desc.TextSize = 10
Â  Â  desc.TextXAlignment = Enum.TextXAlignment.Left
Â  Â  desc.Parent = frame

Â  Â  local dropdown = Instance.new("TextButton")
Â  Â  dropdown.Size = UDim2.new(0.4, 0, 0, 30)
Â  Â  dropdown.Position = UDim2.new(1, -75, 0.5, -15)
Â  Â  dropdown.BackgroundColor3 = Color3.fromRGB(255, 255, 40)
Â  Â  dropdown.Text = items[1] or "Select"
Â  Â  dropdown.TextColor3 = Color3.fromRGB(40, 40, 20)
Â  Â  dropdown.Font = Enum.Font.GothamBold
Â  Â  dropdown.TextSize = 12
Â  Â  dropdown.BorderSizePixel = 0
Â  Â  dropdown.Parent = frame

Â  Â  local btnCorner = Instance.new("UICorner")
Â  Â  btnCorner.CornerRadius = UDim.new(0, 8)
Â  Â  btnCorner.Parent = dropdown

Â  Â  local selected = items[1]
Â  Â  local menu = nil
Â  Â  SafeConnect(dropdown.MouseButton1Click, function()
Â  Â  Â  Â  -- ÄÃ³ng menu cÅ© náº¿u cÃ³
Â  Â  Â  Â  if menu and menu.Parent then menu:Destroy() end
Â  Â  Â  Â  
Â  Â  Â  Â  menu = Instance.new("Frame")
Â  Â  Â  Â  menu.Size = UDim2.new(1, 0, 0, #items*28)
Â  Â  Â  Â  menu.Position = UDim2.new(0, 0, 1, 0) Â -- Äáº·t dÆ°á»›i Frame chÃ­nh
Â  Â  Â  Â  menu.BackgroundColor3 = Color3.fromRGB(220, 255, 120)
Â  Â  Â  Â  menu.ZIndex = dropdown.ZIndex + 1
Â  Â  Â  Â  menu.Parent = MainContainer Â -- Äáº·t vÃ o MainContainer Ä‘á»ƒ trÃ¡nh bá»‹ cáº¯t bá»Ÿi ContentScroll
Â  Â  Â  Â  
Â  Â  Â  Â  -- TÃ­nh vá»‹ trÃ­ menu: Vá»‹ trÃ­ cá»§a ComboBox trong MainContainer + (chiá»u cao cá»§a frame)
Â  Â  Â  Â  local absPos = frame.AbsolutePosition + Vector2.new(0, frame.AbsoluteSize.Y)
Â  Â  Â  Â  menu.Position = UDim2.new(0, absPos.X - MainContainer.AbsolutePosition.X, 0, absPos.Y - MainContainer.AbsolutePosition.Y)
Â  Â  Â  Â  menu.Size = UDim2.new(0, dropdown.AbsoluteSize.X, 0, #items*28)
Â  Â  Â  Â  menu.Position = UDim2.new(1, -75, 0.5, -15 + 30)
Â  Â  Â  Â  
Â  Â  Â  Â  
Â  Â  Â  Â  local posInContainer = frame.Position.Y.Offset + frame.Parent.Position.Y.Offset + TitleBar.Size.Y.Offset + 10 -- Vá»‹ trÃ­ Frame trong Main
Â  Â  Â  Â  menu.Position = UDim2.new(1, -75, 0, posInContainer + frame.Size.Y.Offset - 5)
Â  Â  Â  Â  menu.Size = UDim2.new(0, dropdown.Size.Offset, 0, #items*28)
Â  Â  Â  Â  
Â  Â  Â  Â  
Â  Â  Â  Â  for i, item in ipairs(items) do
Â  Â  Â  Â  Â  Â  local itemBtn = Instance.new("TextButton")
Â  Â  Â  Â  Â  Â  itemBtn.Size = UDim2.new(1, 0, 0, 28)
Â  Â  Â  Â  Â  Â  itemBtn.Position = UDim2.new(0, 0, 0, (i-1)*28)
Â  Â  Â  Â  Â  Â  itemBtn.BackgroundColor3 = item == selected and Color3.fromRGB(255, 255, 40) or Color3.fromRGB(220, 255, 120)
Â  Â  Â  Â  Â  Â  itemBtn.Text = item
Â  Â  Â  Â  Â  Â  itemBtn.TextColor3 = Color3.fromRGB(40, 40, 20)
Â  Â  Â  Â  Â  Â  itemBtn.Font = Enum.Font.Gotham
Â  Â  Â  Â  Â  Â  itemBtn.TextSize = 12
Â  Â  Â  Â  Â  Â  itemBtn.BorderSizePixel = 0
Â  Â  Â  Â  Â  Â  itemBtn.Parent = menu
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  SafeConnect(itemBtn.MouseButton1Click, function()
Â  Â  Â  Â  Â  Â  Â  Â  dropdown.Text = item
Â  Â  Â  Â  Â  Â  Â  Â  selected = item
Â  Â  Â  Â  Â  Â  Â  Â  menu:Destroy()
Â  Â  Â  Â  Â  Â  Â  Â  if callback then callback(item) end
Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  end
Â  Â  Â  Â  
Â  Â  Â  Â  -- ÄÃ³ng menu khi click ra ngoÃ i
Â  Â  Â  Â  local inputConn = UserInputService.InputBegan:Connect(function(input)
Â  Â  Â  Â  Â  Â  if input.UserInputType == Enum.UserInputType.MouseButton1 then
Â  Â  Â  Â  Â  Â  Â  Â  if menu and menu.Parent and not input:IsDescendantOf(menu) and not input:IsDescendantOf(dropdown) then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  menu:Destroy()
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end)
Â  Â  Â  Â  menu.Destroying:Connect(function() inputConn:Disconnect() end)
Â  Â  end)

Â  Â  return frame
end


-- -------------------------------------------------------------------
-- GUI CONSTRUCTION
-- -------------------------------------------------------------------

local HimonoHub = Instance.new("ScreenGui")
HimonoHub.Name = "HimonoHubSulfur"
HimonoHub.ResetOnSpawn = false
HimonoHub.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
HimonoHub.Parent = CoreGui Â  -- Äáº·t vÃ o CoreGui Ä‘á»ƒ trÃ¡nh bá»‹ che bá»Ÿi cÃ¡c pháº§n tá»­ game

MainContainer = Instance.new("Frame")
MainContainer.Size = UDim2.new(0, 500, 0, 480) Â -- KÃ­ch thÆ°á»›c nhá» hÆ¡n
MainContainer.Position = UDim2.new(0.5, -250, 0.5, -240)
MainContainer.BackgroundColor3 = Color3.fromRGB(220, 255, 40) Â -- Ná»n chÃ­nh VÃ ng nháº¡t
MainContainer.BorderSizePixel = 0
MainContainer.Parent = HimonoHub

local ContainerCorner = Instance.new("UICorner")
ContainerCorner.CornerRadius = UDim.new(0, 10)
ContainerCorner.Parent = MainContainer

local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 40)
TitleBar.BackgroundColor3 = Color3.fromRGB(180, 220, 40) Â -- Thanh tiÃªu Ä‘á» VÃ ng Ä‘áº­m hÆ¡n
TitleBar.Parent = MainContainer

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 10)
TitleCorner.Parent = TitleBar

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -100, 1, 0)
Title.BackgroundTransparency = 1
Title.Text = "ğŸŸ¡ HIMONO HUB v4.2 - MODERN EDITION"
Title.TextColor3 = Color3.fromRGB(40, 40, 20)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Position = UDim2.new(0, 10, 0, 0)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Title.Parent = TitleBar

local StealthIndicator = Instance.new("Frame")
StealthIndicator.Size = UDim2.new(0, 10, 0, 10)
StealthIndicator.Position = UDim2.new(1, -100, 0.5, -5)
StealthIndicator.BackgroundColor3 = Color3.fromRGB(40, 180, 40)
StealthIndicator.Parent = TitleBar

local StealthCorner = Instance.new("UICorner")
StealthCorner.CornerRadius = UDim.new(1, 0)
StealthCorner.Parent = StealthIndicator

local StealthLabel = Instance.new("TextLabel")
StealthLabel.Size = UDim2.new(0, 80, 1, 0)
StealthLabel.Position = UDim2.new(1, -90, 0, 0)
StealthLabel.BackgroundTransparency = 1
StealthLabel.Text = "STEALTH: ON"
StealthLabel.TextColor3 = Color3.fromRGB(40, 40, 20)
StealthLabel.Font = Enum.Font.Gotham
StealthLabel.TextSize = 11
StealthLabel.Parent = TitleBar


local TabContainer = Instance.new("ScrollingFrame")
TabContainer.Size = UDim2.new(1, -20, 0, 35)
TabContainer.Position = UDim2.new(0, 10, 0, 50)
TabContainer.BackgroundTransparency = 1
TabContainer.ScrollBarThickness = 3
TabContainer.ScrollBarImageColor3 = Color3.fromRGB(180, 220, 40)
TabContainer.CanvasSize = UDim2.new(2, 0, 0, 0)
TabContainer.Parent = MainContainer

local TabListLayout = Instance.new("UIListLayout")
TabListLayout.FillDirection = Enum.FillDirection.Horizontal
TabListLayout.Padding = UDim.new(0, 6)
TabListLayout.Parent = TabContainer

local ContentContainer = Instance.new("Frame")
ContentContainer.Size = UDim2.new(1, -20, 1, -105)
ContentContainer.Position = UDim2.new(0, 10, 0, 85)
ContentContainer.BackgroundColor3 = Color3.fromRGB(255, 255, 255) Â -- Ná»n ná»™i dung Tráº¯ng sÃ¡ng
ContentContainer.BorderSizePixel = 0
ContentContainer.Parent = MainContainer

local ContentCorner = Instance.new("UICorner")
ContentCorner.CornerRadius = UDim.new(0, 8)
ContentCorner.Parent = ContentContainer

local ContentScroll = Instance.new("ScrollingFrame")
ContentScroll.Size = UDim2.new(1, 0, 1, 0)
ContentScroll.BackgroundTransparency = 1
ContentScroll.ScrollBarThickness = 5
ContentScroll.ScrollBarImageColor3 = Color3.fromRGB(180, 220, 40)
ContentScroll.CanvasSize = UDim2.new(0, 0, 2, 0)
ContentScroll.Parent = ContentContainer

local ContentLayout = Instance.new("UIListLayout")
ContentLayout.Padding = UDim.new(0, 10)
ContentLayout.Parent = ContentScroll

local tabs = {
Â  Â  "ğŸ  MAIN", "ğŸ—ºï¸ DUNGEON", "ğŸŒ¾ FARM", "ğŸ° GACHA", 
Â  Â  "âš¡ STATS", "ğŸš€ TELEPORT", "ğŸ¥š OPEN EGG", "âš™ï¸ SETTINGS"
}
local tabFrames, tabButtons = {}, {}

for i, tabName in pairs(tabs) do
Â  Â  local tabButton = Instance.new("TextButton")
Â  Â  tabButton.Size = UDim2.new(0, 100, 1, 0)
Â  Â  tabButton.BackgroundColor3 = i == 1 and Color3.fromRGB(255, 255, 40) or Color3.fromRGB(220, 255, 40)
Â  Â  tabButton.Text = tabName
Â  Â  tabButton.TextColor3 = Color3.fromRGB(40, 40, 20)
Â  Â  tabButton.Font = Enum.Font.GothamBold
Â  Â  tabButton.TextSize = 12
Â  Â  tabButton.BorderSizePixel = 0
Â  Â  tabButton.Parent = TabContainer

Â  Â  local tabButtonCorner = Instance.new("UICorner")
Â  Â  tabButtonCorner.CornerRadius = UDim.new(0, 6)
Â  Â  tabButtonCorner.Parent = tabButton

Â  Â  local contentFrame = Instance.new("ScrollingFrame")
Â  Â  contentFrame.Size = UDim2.new(1, 0, 1, 0)
Â  Â  contentFrame.BackgroundTransparency = 1
Â  Â  contentFrame.ScrollBarThickness = 5
Â  Â  contentFrame.ScrollBarImageColor3 = Color3.fromRGB(180, 220, 40)
Â  Â  contentFrame.CanvasSize = UDim2.new(0, 0, 2, 0)
Â  Â  contentFrame.Visible = i == 1
Â  Â  contentFrame.Parent = ContentScroll

Â  Â  local contentFrameLayout = Instance.new("UIListLayout")
Â  Â  contentFrameLayout.Padding = UDim.new(0, 10)
Â  Â  contentFrameLayout.Parent = contentFrame

Â  Â  tabFrames[tabName] = contentFrame
Â  Â  tabButtons[tabName] = tabButton

Â  Â  SafeConnect(tabButton.MouseButton1Click, function()
Â  Â  Â  Â  for name, frame in pairs(tabFrames) do
Â  Â  Â  Â  Â  Â  frame.Visible = (name == tabName)
Â  Â  Â  Â  end
Â  Â  Â  Â  for name, btn in pairs(tabButtons) do
Â  Â  Â  Â  Â  Â  btn.BackgroundColor3 = (name == tabName) and Color3.fromRGB(255, 255, 40) or Color3.fromRGB(220, 255, 40)
Â  Â  Â  Â  end
Â  Â  end)
end


-- -------------------------------------------------------------------
-- TAB DEFINITIONS - ADDING TOGGLES
-- -------------------------------------------------------------------

-- MAIN TAB (CÃ¡c chá»©c nÄƒng chung)
local mainContent = tabFrames["ğŸ  MAIN"]

local autoAttackToggle, autoAttackBtn = CreateToggleSwitch(
Â  Â  "Enable Auto Attack", 
Â  Â  "Tá»± Ä‘á»™ng táº¥n cÃ´ng káº» Ä‘á»‹ch gáº§n nháº¥t (farm chung)", 
Â  Â  false, 
Â  Â  function(enabled)
Â  Â  Â  Â  if enabled then StartLoop("AutoAttack", AutoAttackLogic, 0.3) else StopLoop("AutoAttack") end
Â  Â  end
)
autoAttackToggle.Parent = mainContent

local autoDropsToggle, autoDropsBtn = CreateToggleSwitch(
Â  Â  "Enable Auto Collect All Drops", 
Â  Â  "Tá»± Ä‘á»™ng nháº·t váº­t pháº©m quanh báº¡n (hoáº¡t Ä‘á»™ng cáº£ trong Dungeon)", 
Â  Â  false, 
Â  Â  function(enabled)
Â  Â  Â  Â  if enabled then StartLoop("AutoCollect", AutoCollectLogic, 1.0) else StopLoop("AutoCollect") end
Â  Â  end
)
autoDropsToggle.Parent = mainContent

local autoRebirthToggle, autoRebirthBtn = CreateToggleSwitch(
Â  Â  "Enable Auto Rebirth/RankUp", 
Â  Â  "Tá»± Ä‘á»™ng RankUp/Rebirth khi cÃ³ thá»ƒ", 
Â  Â  false, 
Â  Â  function(enabled)
Â  Â  Â  Â  if enabled then StartLoop("AutoRebirth", AutoRebirthLogic, 10) 
Â  Â  Â  Â  else StopLoop("AutoRebirth") end
Â  Â  end
)
autoRebirthToggle.Parent = mainContent


-- DUNGEON TAB (Farm Dungeon)
local dungeonContent = tabFrames["ğŸ—ºï¸ DUNGEON"]

local autoJoinDungeonToggle, autoJoinDungeonBtn = CreateToggleSwitch(
Â  Â  "Enable Auto Join Dungeon Easy", 
Â  Â  "Tá»± Ä‘á»™ng gá»­i yÃªu cáº§u vÃ o Dungeon Easy (Thá»­ má»—i 15s).", 
Â  Â  false, 
Â  Â  function(enabled)
Â  Â  Â  Â  if enabled then 
Â  Â  Â  Â  Â  Â  isDungeonActive = true 
Â  Â  Â  Â  Â  Â  SaveAndStopFarmLoops() 
Â  Â  Â  Â  Â  Â  StartLoop("AutoJoinDungeon", AutoJoinDungeonEasyLogic, 15)
Â  Â  Â  Â  else 
Â  Â  Â  Â  Â  Â  StopLoop("AutoJoinDungeon")
Â  Â  Â  Â  Â  Â  isDungeonActive = activeLoops["AutoFarmDungeon"] or false 
Â  Â  Â  Â  Â  Â  if not isDungeonActive then RestoreFarmLoops() end
Â  Â  Â  Â  end
Â  Â  end
)
autoJoinDungeonToggle.Parent = dungeonContent

local autoFarmDungeonToggle, autoFarmDungeonBtn = CreateToggleSwitch(
Â  Â  "Enable Auto Farm Dungeon", 
Â  Â  "Tá»± Ä‘á»™ng Teleport vÃ  farm quÃ¡i trong Dungeon (Chá»‰ farm trong Dungeon).", 
Â  Â  false, 
Â  Â  function(enabled)
Â  Â  Â  Â  autoDungeonFarmEnabled = enabled
Â  Â  Â  Â  if enabled then 
Â  Â  Â  Â  Â  Â  isDungeonActive = true
Â  Â  Â  Â  Â  Â  SaveAndStopFarmLoops() 
Â  Â  Â  Â  Â  Â  StartLoop("AutoFarmDungeon", AutoFarmDungeonLogic, 0.4) 
Â  Â  Â  Â  else 
Â  Â  Â  Â  Â  Â  StopLoop("AutoFarmDungeon")
Â  Â  Â  Â  Â  Â  isDungeonActive = activeLoops["AutoJoinDungeon"] or false 
Â  Â  Â  Â  Â  Â  if not isDungeonActive then RestoreFarmLoops() end
Â  Â  Â  Â  end
Â  Â  end
)
autoFarmDungeonToggle.Parent = dungeonContent


-- FARM TAB (Farm Map: Selected & Random)
local farmContent = tabFrames["ğŸŒ¾ FARM"]

-- Refresh Enemy List (TÃ­ch há»£p vÃ o ComboBox)
local positionsByName = RefreshEnemiesData()
local enemyCombo = CreateComboBox("Select Enemy to Farm", "Chá»n káº» Ä‘á»‹ch Ä‘á»ƒ báº­t Auto Farm Selected", uniqueEnemyNames, function(selected)
Â  Â  selectedEnemyName = selected
end)
enemyCombo.Parent = farmContent

local refreshBtn = CreateActionButton("Refresh Enemy List", "Tap this to scan and update the enemy list", function()
Â  Â  positionsByName = RefreshEnemiesData()
Â  Â  -- Cáº­p nháº­t ComboBox thá»§ cÃ´ng (khÃ³ khÄƒn hÆ¡n, nhÆ°ng cháº¥p nháº­n)
Â  Â  print("ğŸ”„ Refreshed enemy list! Found " .. #uniqueEnemyNames .. " unique enemies.")
end)
refreshBtn.Parent = farmContent

local farmSelectedToggle, farmSelectedBtn = CreateToggleSwitch(
Â  Â  "Enable Auto Farm Selected Enemy", 
Â  Â  "Tá»± Ä‘á»™ng farm káº» Ä‘á»‹ch Ä‘Ã£ chá»n: " .. (selectedEnemyName or "None"), 
Â  Â  false, 
Â  Â  function(enabled)
Â  Â  Â  Â  if enabled then StartLoop("FarmSelected", FarmSelectedLogic, 0.5) else StopLoop("FarmSelected") end
Â  Â  end
)
farmSelectedToggle.Parent = farmContent

local farmRandomToggle, farmRandomBtn = CreateToggleSwitch(
Â  Â  "Enable Farm Random Enemies", 
Â  Â  "Tá»± Ä‘á»™ng farm ngáº«u nhiÃªn káº» Ä‘á»‹ch trong pháº¡m vi", 
Â  Â  false, 
Â  Â  function(enabled)
Â  Â  Â  Â  if enabled then StartLoop("FarmRandom", FarmRandomLogic, 0.5) else StopLoop("FarmRandom") end
Â  Â  end
)
farmRandomToggle.Parent = farmContent


-- GACHA TAB
local gachaContent = tabFrames["ğŸ° GACHA"]
local gachaTypes = {"Biju", "Sayajin", "Race", "Haki", "Fruits"}

for _, gacha in ipairs(gachaTypes) do
Â  Â  local toggle, btn = CreateToggleSwitch(
Â  Â  Â  Â  "Enable Auto Roll " .. gacha, 
Â  Â  Â  Â  "Tá»± Ä‘á»™ng roll " .. gacha .. " khi cÃ³ tiá»n", 
Â  Â  Â  Â  false, 
Â  Â  Â  Â  function(enabled)
Â  Â  Â  Â  Â  Â  if enabled then
Â  Â  Â  Â  Â  Â  Â  Â  StartLoop("AutoRoll"..gacha, function() StartGacha(gacha) end, 2)
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  StopLoop("AutoRoll"..gacha)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  )
Â  Â  toggle.Parent = gachaContent
end

-- STATS TAB
local statsContent = tabFrames["âš¡ STATS"]
local statTypes = {"Attack", "Mastery", "Speed", "Luck"}

local statCombo = CreateComboBox("Stat Type", "Chá»n loáº¡i stat Ä‘á»ƒ cá»™ng Ä‘iá»ƒm", statTypes, function(selected)
Â  Â  selectedStat = selected
end)
statCombo.Parent = statsContent

local distributeBtn = CreateActionButton("Distribute Stat Point", "Cá»™ng 1 Ä‘iá»ƒm stat Ä‘Ã£ chá»n", function()
Â  Â  local remote = ReplicatedStorage:FindFirstChild("Reply") and ReplicatedStorage.Reply:FindFirstChild("Reliable")
Â  Â  if remote then SafeFire(remote, "Distribute Stat Point", {[1]=selectedStat}) end
end)
distributeBtn.Parent = statsContent


-- TELEPORT TAB
local teleportContent = tabFrames["ğŸš€ TELEPORT"]
local zoneList = {"Zone 1", "Zone 2", "Zone 3", "Zone 4"}

local zoneCombo = CreateComboBox("Zone", "Chá»n khu vá»±c Ä‘á»ƒ teleport", zoneList, function(selected)
Â  Â  selectedZone = selected
end)
zoneCombo.Parent = teleportContent

local teleportBtn = CreateActionButton("Teleport Now", "Di chuyá»ƒn ngay láº­p tá»©c Ä‘áº¿n khu vá»±c Ä‘Ã£ chá»n", function()
Â  Â  local remote = ReplicatedStorage:FindFirstChild("Reply") and ReplicatedStorage.Reply:FindFirstChild("Reliable")
Â  Â  if remote then 
Â  Â  Â  Â  SafeFire(remote, "Zone Teleport", {[1]=selectedZone}) 
Â  Â  Â  Â  lastZone = selectedZone Â -- Ghi nhá»› zone
Â  Â  end
end)
teleportBtn.Parent = teleportContent


-- OPEN EGG TAB
local eggContent = tabFrames["ğŸ¥š OPEN EGG"]

local openEggBtn = CreateActionButton("Open Single Egg", "Má»Ÿ 1 egg gáº§n báº¡n", function()
Â  Â  local remote = ReplicatedStorage:FindFirstChild("Reply") and ReplicatedStorage.Reply:FindFirstChild("Reliable")
Â  Â  if remote then SafeFire(remote, "Open Star", {[1]="Egg"}) end
end)
openEggBtn.Parent = eggContent

local autoOpenEggToggle, autoOpenEggBtn = CreateToggleSwitch(
Â  Â  "Enable Auto Open Egg", 
Â  Â  "Tá»± Ä‘á»™ng má»Ÿ egg liÃªn tá»¥c khi gáº§n egg", 
Â  Â  false, 
Â  Â  function(enabled)
Â  Â  Â  Â  autoOpenEggEnabled = enabled
Â  Â  Â  Â  if enabled then
Â  Â  Â  Â  Â  Â  StartLoop("AutoOpenEgg", function()
Â  Â  Â  Â  Â  Â  Â  Â  local remote = ReplicatedStorage:FindFirstChild("Reply") and ReplicatedStorage.Reply:FindFirstChild("Reliable")
Â  Â  Â  Â  Â  Â  Â  Â  if remote then SafeFire(remote, "Open Star", {[1]="Egg"}) end
Â  Â  Â  Â  Â  Â  end, 2)
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  StopLoop("AutoOpenEgg")
Â  Â  Â  Â  end
Â  Â  end
)
autoOpenEggToggle.Parent = eggContent


-- SETTINGS TAB
local settingsContent = tabFrames["âš™ï¸ SETTINGS"]

local antiAfkToggle, antiAfkBtn = CreateToggleSwitch(
Â  Â  "Enable Anti-AFK", 
Â  Â  "Chá»‘ng bá»‹ kick khá»i server khi AFK", 
Â  Â  true, 
Â  Â  function(enabled)
Â  Â  Â  Â  if enabled then EnableAntiAFK() 
Â  Â  Â  Â  else if antiAFKConnection then antiAFKConnection:Disconnect() end end
Â  Â  end
)
antiAfkToggle.Parent = settingsContent

local stealthToggle, stealthBtn = CreateToggleSwitch(
Â  Â  "Enable Stealth Mode", 
Â  Â  "ThÃªm Ä‘á»™ trá»… Ä‘á»ƒ giáº£ láº­p hÃ nh Ä‘á»™ng ngÆ°á»i chÆ¡i", 
Â  Â  true, 
Â  Â  function(enabled)
Â  Â  Â  Â  stealthMode = enabled
Â  Â  Â  Â  StealthIndicator.BackgroundColor3 = enabled and Color3.fromRGB(40, 180, 40) or Color3.fromRGB(180, 40, 40)
Â  Â  Â  Â  StealthLabel.Text = enabled and "STEALTH: ON" or "STEALTH: OFF"
Â  Â  end
)
stealthToggle.Parent = settingsContent


-- -------------------------------------------------------------------
-- CHá»¨C NÄ‚NG KÃ‰O VÃ€ NÃšT áº¨N/HIá»†N UI
-- -------------------------------------------------------------------

-- DRAG FUNCTIONALITY
local dragging, dragInput, dragStart, startPos
SafeConnect(TitleBar.InputBegan, function(input)
Â  Â  if input.UserInputType == Enum.UserInputType.MouseButton1 then
Â  Â  Â  Â  dragging = true
Â  Â  Â  Â  dragStart = input.Position
Â  Â  Â  Â  startPos = MainContainer.Position
Â  Â  end
end)
SafeConnect(UserInputService.InputChanged, function(input)
Â  Â  if input == dragInput and dragging then
Â  Â  Â  Â  local delta = input.Position - dragStart
Â  Â  Â  Â  MainContainer.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
Â  Â  end
end)
SafeConnect(UserInputService.InputEnded, function(input)
Â  Â  if input.UserInputType == Enum.UserInputType.MouseButton1 then
Â  Â  Â  Â  dragging = false
Â  Â  end
end)


-- NÃšT áº¨N/HIá»†N UI
ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 30, 0, 30)
ToggleButton.Position = UDim2.new(1, -40, 0, 5) Â -- GÃ³c trÃªn bÃªn pháº£i, gáº§n mÃ©p
ToggleButton.BackgroundColor3 = Color3.fromRGB(180, 220, 40)
ToggleButton.Text = "X"
ToggleButton.TextColor3 = Color3.fromRGB(40, 40, 20)
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.TextSize = 16
ToggleButton.BorderSizePixel = 0
ToggleButton.Parent = TitleBar Â -- Äáº·t vÃ o TitleBar cho dá»… quáº£n lÃ½

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 6)
toggleCorner.Parent = ToggleButton

local isUIOpen = true
SafeConnect(ToggleButton.MouseButton1Click, function()
Â  Â  isUIOpen = not isUIOpen
Â  Â  MainContainer.Visible = isUIOpen
Â  Â  ToggleButton.Text = isUIOpen and "X" or "O" Â -- X Ä‘á»ƒ Ä‘Ã³ng, O Ä‘á»ƒ má»Ÿ (hoáº·c Â â–¶ï¸)
Â  Â  ToggleButton.Size = UDim2.new(0, 30, 0, 30)
Â  Â  ToggleButton.Position = UDim2.new(1, -40, 0, 5)
Â  Â  if not isUIOpen then
Â  Â  Â  Â  ToggleButton.Position = UDim2.new(0.5, -15, 0.5, -15) Â -- Äáº·t nÃºt á»Ÿ giá»¯a khi áº©n
Â  Â  Â  Â  ToggleButton.Parent = HimonoHub Â -- Chuyá»ƒn ra ngoÃ i Ä‘á»ƒ khÃ´ng bá»‹ áº©n theo MainContainer
Â  Â  else
Â  Â  Â  Â  ToggleButton.Parent = TitleBar
Â  Â  end
end)

-- Khá»Ÿi táº¡o vá»‹ trÃ­ ban Ä‘áº§u cá»§a ToggleButton
ToggleButton.Position = UDim2.new(1, -40, 0, 5)


EnableAntiAFK()

-- Cáº­p nháº­t CanvasSize cá»§a ScrollFrame
task.spawn(function()
Â  Â  while true do
Â  Â  Â  Â  for _, frame in pairs(tabFrames) do
Â  Â  Â  Â  Â  Â  frame.CanvasSize = UDim2.new(0, 0, 0, frame.UIListLayout.AbsoluteContentSize.Y + 20)
Â  Â  Â  Â  end
Â  Â  Â  Â  TabContainer.CanvasSize = UDim2.new(0, TabListLayout.AbsoluteContentSize.X + 20, 0, 0)
Â  Â  Â  Â  
Â  Â  Â  Â  -- Cáº­p nháº­t mÃ´ táº£ Auto Farm Selected (Do UI khÃ´ng thá»ƒ tá»± Ä‘á»™ng cáº­p nháº­t Text cá»§a Toggle)
Â  Â  Â  Â  if farmSelectedToggle and selectedEnemyName then
Â  Â  Â  Â  Â  Â  local titleLabel = farmSelectedToggle:FindFirstChild("TextLabel")
Â  Â  Â  Â  Â  Â  if titleLabel then
Â  Â  Â  Â  Â  Â  Â  Â  -- Giá»¯ nguyÃªn tiÃªu Ä‘á», chá»‰ thay Ä‘á»•i mÃ´ táº£
Â  Â  Â  Â  Â  Â  Â  Â  local descLabel = farmSelectedToggle:FindFirstChild("TextLabel")
Â  Â  Â  Â  Â  Â  Â  Â  if descLabel then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  descLabel.Text = "Tá»± Ä‘á»™ng farm káº» Ä‘á»‹ch Ä‘Ã£ chá»n: " .. selectedEnemyName 
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  Â  Â  
Â  Â  Â  Â  task.wait(0.5)
Â  Â  end
end)

print("âœ… Himono Hub v4.2 - MODERN EDITION LOADED! (Ready for operation)")
